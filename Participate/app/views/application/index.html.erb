<h1>Audience Participation Stuff!</h1>



<h2>Shapes:</h2>
<% if @shapes.any? %>
  <ul>
    <% @shapes.each do |shape| %>
      <li><%= link_to shape.name, edit_shape_path(shape) %></li>
    <% end %>
  </ul>
<% else %>
  <p>It looks like all the shapes are already on the board</p>
<% end %>

<h2>Drums</h2>
<table class='table table-bordered'>
  <thead>
  <tr>
    <th></th>
    <% @steps.each do |step| %>
      <th><%= step.position %></th>
    <% end %>
  </tr>
  </thead>
  <tbody>
  <% @drums.each do |drum| %>
    <tr>
      <th><%= drum.name %></th>
      <% @steps.each do |step| %>
        <td class='step-choose <%= 'success' if step.drum == drum %>'
            id="<%= step.id %>" drum_id='<%= drum.id %>'></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>

</table>

<script type="text/javascript">
  $('.step-choose').on('click', function () {
    var columnNo = $(this).index();
    $(this).closest("table").find("tr td:nth-child(" + (columnNo+1) + ")").removeClass('success');
    $(this).addClass('success');
    $.post(
      '/steps/set',
      {
        id: $(this).attr("id"),
        drum_id: $(this).attr('drum_id')
      }
    )
  });
</script>